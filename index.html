<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>First with React</title>
    <script src="https://unpkg.com/react@15/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="react-container"></div>
<!--suppress JSUnusedLocalSymbols -->
<script type="text/babel">

    const Note = React.createClass({
        getInitialState() {
            return { editing: false }
        },
        edit() {
            this.setState({ editing: true });
        },
        save() {
            const value = this.refs.newText.value;
            prompt(value);
            this.setState({ editing: false });
        },
        remove(){
            confirm('Remove note')
        },
        renderForm() {
            return (
                    <div className="note">
                        <textarea ref="newText"/>
                        <button onClick={this.save}>SAVE</button>
                    </div>
            );
        },
        renderDisplay() {
            return (
                    <div className="note">
                        <p>{this.props.children}</p>
                        <span>
                             <button onClick={this.edit}>Edit</button>
                             <button onClick={this.remove}>X</button>
                        </span>
                    </div>
            );
        },
        render() {
            return (this.state.editing) ?  this.renderForm() : this.renderDisplay();
        }
    });

    const Board = React.createClass({
        propTypes: {
            count: function (props, propName) {
                if(typeof props[propName] !== "number") {
                    return new Error("the count must be a number");
                }

                if(props[propName] > 100) {
                    return new Error(`
                        Creating ${props[propName]} notes is ridiculous.
                    `);
                }
            }
            /*count: React.PropTypes.number*/
        },
        getInitialState() {
            return {
                notes: [
                    'Hobble begrudgingly like a jolly plank.',
                    'All golds taste stormy, sunny sharks.',
                    'Yuck, endure me jolly roger, ye gutless son!',
                    'Oh, love me woodchuck, ye cold gibbet!',
                    'Parrots are the bung holes of the mighty desolation.'
                ]
            }
        },
        render() {
            return(
                    <div className="board">
                        {this.state.notes.map((note, i) => {
                            return <Note key={i}>{note}</Note>
                        })}
                    </div>
            );
        }
    });

    ReactDOM.render(
            <Board count={5} />,
        document.getElementById('react-container')
    );
</script>
</body>
</html>